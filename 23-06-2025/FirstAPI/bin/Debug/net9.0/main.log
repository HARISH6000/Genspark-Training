2025-06-23 10:27:12,827 [1] INFO Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5001
2025-06-23 10:27:12,856 [1] INFO Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-23 10:27:12,857 [1] INFO Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-23 10:27:12,857 [1] INFO Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/Documents/PresidioTraining/Genspark-Training/23-06-2025/FirstAPI
2025-06-23 10:27:24,451 [.NET Signal Handler] INFO Microsoft.Hosting.Lifetime - Application is shutting down...
2025-06-23 10:30:32,232 [1] INFO Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5001
2025-06-23 10:30:32,261 [1] INFO Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-23 10:30:32,261 [1] INFO Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-23 10:30:32,261 [1] INFO Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/Documents/PresidioTraining/Genspark-Training/23-06-2025/FirstAPI
2025-06-23 10:34:43,629 [.NET Signal Handler] INFO Microsoft.Hosting.Lifetime - Application is shutting down...
2025-06-23 10:34:54,034 [1] ERROR Microsoft.EntityFrameworkCore.Database.Connection - An error occurred using the connection to database 'myDataBase' on server 'tcp://localhost:5432'.
2025-06-23 10:34:54,645 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (337ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE DATABASE "myDataBase";
2025-06-23 10:34:54,761 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-06-23 10:34:54,772 [1] INFO Microsoft.EntityFrameworkCore.Migrations - Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-06-23 10:34:54,774 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-06-23 10:34:54,777 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-06-23 10:34:54,789 [1] INFO Microsoft.EntityFrameworkCore.Migrations - Applying migration '20250602064259_init'.
2025-06-23 10:34:54,817 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "DoctorsBySpeciality" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Dname" text NOT NULL,
    "Yoe" real NOT NULL,
    CONSTRAINT "PK_DoctorsBySpeciality" PRIMARY KEY ("Id")
);
2025-06-23 10:34:54,819 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "Specialities" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" text NOT NULL,
    "Status" text NOT NULL,
    CONSTRAINT "PK_Specialities" PRIMARY KEY ("Id")
);
2025-06-23 10:34:54,821 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "Users" (
    "Username" text NOT NULL,
    "Role" text NOT NULL,
    "Password" bytea,
    "HashKey" bytea,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Username")
);
2025-06-23 10:34:54,824 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "Doctors" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" text NOT NULL,
    "Status" text NOT NULL,
    "YearsOfExperience" real NOT NULL,
    "Email" text NOT NULL,
    CONSTRAINT "PK_Doctors" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_User_Doctor" FOREIGN KEY ("Email") REFERENCES "Users" ("Username") ON DELETE RESTRICT
);
2025-06-23 10:34:54,829 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "Patients" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" text NOT NULL,
    "Age" integer NOT NULL,
    "Email" text NOT NULL,
    "Phone" text NOT NULL,
    CONSTRAINT "PK_Patients" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_User_Patient" FOREIGN KEY ("Email") REFERENCES "Users" ("Username") ON DELETE RESTRICT
);
2025-06-23 10:34:54,832 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "DoctorSpecialities" (
    "SerialNumber" integer GENERATED BY DEFAULT AS IDENTITY,
    "DoctorId" integer NOT NULL,
    "SpecialityId" integer NOT NULL,
    CONSTRAINT "PK_DoctorSpecialities" PRIMARY KEY ("SerialNumber"),
    CONSTRAINT "FK_Speciality_Doctor" FOREIGN KEY ("DoctorId") REFERENCES "Doctors" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_Speciality_Spec" FOREIGN KEY ("SpecialityId") REFERENCES "Specialities" ("Id") ON DELETE RESTRICT
);
2025-06-23 10:34:54,835 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "Appointmnets" (
    "AppointmnetNumber" text NOT NULL,
    "PatientId" integer NOT NULL,
    "DoctorId" integer NOT NULL,
    "AppointmnetDateTime" timestamp with time zone NOT NULL,
    "Status" text NOT NULL,
    CONSTRAINT "PK_AppointmentNumber" PRIMARY KEY ("AppointmnetNumber"),
    CONSTRAINT "FK_Appoinment_Doctor" FOREIGN KEY ("DoctorId") REFERENCES "Doctors" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_Appoinment_Patient" FOREIGN KEY ("PatientId") REFERENCES "Patients" ("Id") ON DELETE RESTRICT
);
2025-06-23 10:34:54,861 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_Appointmnets_DoctorId" ON "Appointmnets" ("DoctorId");
2025-06-23 10:34:54,862 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_Appointmnets_PatientId" ON "Appointmnets" ("PatientId");
2025-06-23 10:34:54,863 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Doctors_Email" ON "Doctors" ("Email");
2025-06-23 10:34:54,863 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_DoctorSpecialities_DoctorId" ON "DoctorSpecialities" ("DoctorId");
2025-06-23 10:34:54,864 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_DoctorSpecialities_SpecialityId" ON "DoctorSpecialities" ("SpecialityId");
2025-06-23 10:34:54,865 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Patients_Email" ON "Patients" ("Email");
2025-06-23 10:34:54,866 [1] INFO Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250602064259_init', '9.0.1');
